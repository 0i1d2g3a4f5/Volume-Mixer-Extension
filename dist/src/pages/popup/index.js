import{j as a,r as m,c as j}from"../../../assets/js/client.j9dmEtxY.js";import{w as L,a as C}from"../../../assets/js/withErrorBoundary.tzm5Lg3v.js";function E(e){return typeof e==typeof{name:"",id:0,index:0,volume:0}}function x(e){try{const n=JSON.parse(e);if(Array.isArray(n)){if(n.every(t=>E(t)))return n;console.error("Invalid Tab format in the JSON")}else console.error("Invalid JSON format. Expected an array.")}catch(n){console.error("Error parsing JSON:",n.message)}return null}function y(e){try{return JSON.stringify(e)}catch(n){return console.error("Error stringifying TabList to JSON:",n.message),""}}/*! js-cookie v3.0.5 | MIT */function f(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)e[t]=i[t]}return e}var S={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function g(e,n){function i(o,c,r){if(!(typeof document>"u")){r=f({},n,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var u in r)r[u]&&(s+="; "+u,r[u]!==!0&&(s+="="+r[u].split(";")[0]));return document.cookie=o+"="+e.write(c,o)+s}}function t(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var c=document.cookie?document.cookie.split("; "):[],r={},s=0;s<c.length;s++){var u=c[s].split("="),d=u.slice(1).join("=");try{var p=decodeURIComponent(u[0]);if(r[p]=e.read(d,p),o===p)break}catch{}}return o?r[o]:r}}return Object.create({set:i,get:t,remove:function(o,c){i(o,"",f({},c,{expires:-1}))},withAttributes:function(o){return g(this.converter,f({},this.attributes,o))},withConverter:function(o){return g(f({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}var l=g(S,{path:"/"});function T(){return console.log("getting cookie data"),l.get("TabList")?(console.log(`cookie found:
`+l.get("TabList")),x(l.get("TabList"))):(console.log("no cookie"),[])}function h(e){l.set("TabList",y(e))}async function v(e,n){const i=n/200;try{await chrome.scripting.executeScript({target:{tabId:e},func:({a:t})=>{Array.from(document.querySelectorAll("video, audio")).forEach(c=>{c.volume=t})},args:[{a:i}]})}catch(t){console.error("Error executing script:",t)}}function O(e,n){const t=x(l.get("TabList")).map(o=>o.id==e?(console.log("tab found, volume changing"),{...o,volume:n}):o);return l.set("TabList",y(t)),console.log(JSON.stringify(t)),t}function w(e,n){return e.index-n.index}function I(e,n){return e.some(i=>i.id===n)}function b(e,n){const i=[];for(const t of n)if(!I(e,t.id))i.push(t);else{const o=e.find(c=>c.id==t.id);i.push({id:t.id,name:t.name,index:t.index,volume:o.volume})}return i}const k=()=>{const[e,n]=m.useState([]);function i(){let r=[];return chrome.tabs.query({},s=>{const u=s.map(d=>({id:d.id,name:d.title,index:d.index,volume:100}));r=b(T(),u),n(r),h(r)}),r}m.useEffect(()=>{console.log("queryy"),n(i()),console.log(`TabList:
`+JSON.stringify(e))},[]);const t=e.slice().sort(w),o=(r,s)=>{v(r.id,s),n(O(r.id,s))},c=()=>{h([]),n(i()),e.forEach(r=>{v(r.id,100)})};return a.jsxs("div",{children:[a.jsx("h2",{children:"Tab List"}),a.jsx("ul",{children:t.map(r=>a.jsxs("li",{children:[a.jsx("span",{children:r.name.slice(0,15)}),a.jsx("input",{type:"range",min:0,max:200,value:r.volume,onChange:s=>o(r,+s.target.value)}),a.jsx("span",{children:r.volume})]},r.id))}),a.jsx("button",{id:"myButton",onClick:c,children:"Reset"})]})},J=L(C(k,a.jsx("div",{children:" Loading ... "})),a.jsx("div",{children:" Error Occur "}));function R(){const e=document.querySelector("#app-container");if(!e)throw new Error("Can not find #app-container");j(e).render(a.jsx(J,{}))}R();
